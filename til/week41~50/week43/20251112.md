# 시간

- 09:00 ~ 18:00 : 싸피
- 20:00 ~ 23:00 : 분산 트랜잭션 인프런 강의

# 간략 회고

### 분산 트랜잭션 인프런

SAGA 분산 트랜잭션에 대해서 학습하였다.

분산 트랜잭션은 MSA 환경에서 필수적으로 도입되어야 한다. 그 이유는 보통의 MSA 환경에서는 서비스 마다 데이터베이스가 생성되어 있어,

트랜잭션이 하나로 묶이지 않기 때문이다. 이를 보장하기 위한 방법으로 보통 SAGA 패턴을 많이 사용한다.

SAGA 패턴이란 물리적으로 트랜잭션을 묶을 수 없는 상황이니 보장 트랜잭션을 활용하여 논리적으로 트랜잭션을 보장하는 방법이다.

만약에 어떤 서비스에서 이미 커밋이 되어 데이터 베이스에 저장이 되었다면 이를 delete 하는 쿼리를 날려 논리적으로 롤백이 된 것 처럼

만드는 것이다.

이러한 보장 트랜잭션 방법에는 크게 두가지가 존재한다.

오케스트레이션 방법과, 코레오그래피 방법이 있다.

오케스트레이션 방법은 이 사가 패턴을 총괄하는 서버를 하나 두는 것이다. 따라서 사가의 흐름을 모두 파악할 수 있다는 장점이 있지만

단일 장애지점으로, 오케스트레이션 서버가 죽으면 서비스가 멈출 수 있다는 단점이 있다.

코레오그래피 방법은 이벤트를 활용하는 방법이다. 각 서비스가 자신의 할일을 끝내면 이벤트를 발행하고, 해당 이벤트를 받은 다른 서비스가

다음 작업을 진행하는 방식이다. 이는 오케스트레이션 처럼, 중앙 집중된 서버가 처리하는 것이 아니라 각자 역할을 분담할 수 있다는

장점이 있다. 다만, 이벤트로 이루어져있기 때문에 그 흐름을 명확히 파악하려면 어려움이 있다. 따라서 이런 이벤트 흐름에 대해서는

문서화를 잘 해두어야 할 필요가 있다.