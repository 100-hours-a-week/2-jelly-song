# 시간

- 13:00 ~ 18:00 : 추석 가족들과 시간
- 20:00 ~ 24:00 : 대규모 트래픽

# 간략 회고

### 대규모 트래픽

조회수 관련 대규모 트래픽 상황을 생각해보자.

저번에 살펴보았던 좋아요도 많은 트래픽이 예상 되지만 조회수의 경우에는 좋아요와 비교될 수 없는 많은 Get 요청이 예상된다.

좋아요는 따로 좋아요를 클릭해야 그 리소스 create 요청이 일어나지만 조회수는 단순히 들어가기만 해도 create 요청이 발생한다.

그리고 조회수의 경우 어뷰징 정책마저 생각을 해야한다.

만약 악의적인 사용자가 조회수를 늘리기위해 계속 새로 고침 할 수 있는 경우가 있을 수 있기 때문에 

"10분에 한번만 조회수를 올릴 수 있다" 라는 정책들을 통해 해당 부분을 고려해야한다.

그러면 위의 두가지 문제를 어찌 해결 할 수 있을까? 레디스 도입을 고려 할 수 있다. 레디스는 인메모리이기 때문에 이런 자주 있는 트래픽에

적합한 db로 사용될 수 있다. 또한 레디스는 ttl을 지원한다. 10분을 ttl로 지정하여 해당 사용자에 대해서 분산락을 걸 수 있다.

조회수를 1 올린 다음 레디스에 해당 부분에 대해 lock을 걸어 다음 요청 들에 대해서는 무시할 수 있는 것이다. 즉 어뷰징을 방지할 수 있다. 