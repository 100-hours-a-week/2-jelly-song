# 시간

- 09:00 ~ 18:00 : 싸피
- 20:00 ~ 21:00 : AI 역검 준비
- 21:00 ~ 23:00 : AI 역검
- 23:00 ~ 24:00 : CS 공부

# 간략 회고

### CS 공부

1. redis로 분산락을 걸기 위해서는 어찌 해야할까?

redis의 SET, NX를 활용하면 간편하게 사용할 수 있다.

SET은 redis에 값을 집어 넣는 명령어이고 NX는 값이 없을 경우 성공하는 명령이다.

만약 이 명령이 성공한 경우 락이 걸려있지 않다는 소리이므로 작업을 수행하면 된다.

만약 이 명령이 실패할 경우 락이 걸려있다는 소리 이므로 작업을 수행하지 않으면 된다.

여기서 RedLock이라는 개념이 등장하는데 만약 레디스 레플리케이션을 구축했다고 가정을 해보자.

그러면 복제 지연으로 인해 락 정보가 제대로 전달 되지 않는 문제가 발생할 수 있다.

이런 문제를 해결하기 위해 RedLock 이라는 개념이 나왔는데 투표를 통해 락의 여부를 판단하는 것이다.

예를 들어 레디스가 5개 떠져 있다고 가정하면 3개이상의 레디스 서버에서 락이 있음을 보장하면 그것은 락이 있다는 말로 판단하는 것이다.

2개의 레디스 서버에 이상이 생겨도 락 존재 여부 판단에 이상이 없게 되는 것이다.

2. RestDoc

Swagger의 경우 어노테이션으로 편리하게 사용할 수 있지만 비즈니스 로직에 어노테이션으로 명세서를 위한 코드가 붙는다는 단점이 있다.

RestDoc을 사용하면 테스트 코드에 해당 명세서를 생성하겠다는 코드를 넣어 생성할 수 있으므로 위의 단점을 보완할 수 있다.

다만, adoc 파일을 수동으로 생성해야 한다는 번거로움이 있다.

따라서 RestDoc이 더 번거롭지 않을까? 라는 생각을 해보았는데, 애초에 MockMvc에 관련된 부분, 즉 api 호출에 관련된 부분만

명세서를 만드는 것 이므로, 그 부분에 관련해서 adoc을 만드는 것은 큰 리소스가 아닐 거라고 판단하였고,

테스트 코드를 기반으로 명세서가 생성되어 무엇보다도 신뢰성이 크다는 장점이 크다고 생각하였다.

다음 프로젝트가 생긴다면 RestDoc 도입을 고려해보는 것도 좋을 것 같다는 생각을 하였다.