# 시간

- 09:00 ~ 18:00 : 싸피
- 20:00 ~ 22:00 : 알고리즘 문제 풀이
- 22:00 ~ 23:00 : CS 공부


# 간략 회고

### CS 공부

계속해서 테코톡을 통해 CS 공부를 꾸준히 진행하고 있다.

가장 인상 깊었던 점은 MySQL Replication 동작 방식이었다.

MySQL에서 Primary DB 서버는 스레드를 2가지 가지고 있다. 하나는 바이너리 로그를 쓰는 쓰레드이다. SQL 요청이 들어오면

그것을 바이너리 로그에 작성한다. 그럼 그 바이너리 로그에 적힌 내용을 replication MySQL에 전송하는 전송 스레드가 있다.

Replication DB 역시 스레드를 두가지 가지고 있다. Primary DB에서 보낸 변경 사항을 relay 로그에 작성하는 스레드 하나가 있다.

그리고 또 하나의 스레드는 그 relay 로그 사항을 Replication DB에 반영하는 스레드가 존재한다.

여기서 비동기 방식과 반동기 방식이 존재한다.

비동기 방식은 Primary DB 서버가 Replication 서버에 데이터를 전송하는데 그것이 제대로 반영되었는지 확인하지 않는 방식이다.

따라서 성능은 다른 방식에 비해 빠르다.

반동기 방식은 replication db 서버의 relay 로그에 반영되는지 까지 확인하는 방식이다. 따라서 relay 로그에 반영된 것이 확정되기 때문에

비동기 방식에 비해 안정적이다.

한가지더 배운 점은 replication 복제 지연이다.

replication 복제 지연 때문에 primary db 반영과 replication db 반영 사이에는 시간 지연이 존재한다.

따라서 사용자 입장에선 primary db에 자신의 쓴글을 반영했는데 같은 글을 select 요청을 보냈을 때 그것을 replication db로 요청이 되고

lag이 발생하여 자신이 쓴글을 확인해볼 수 없는 문제가 발생할 수 있다.

이를 자신이 쓴글에 대해서는 같은 primary db에 접근하도록 하여 해결할 수 있다.

마찬가지로 replication db가 여러가지 있을때 replication db 사이에도 lag이 존재할 수 있는데 이로 인한 위와 같은 문제가 또 발생할 수 있다.

이를 사용자 id 기준으로 어느 replication에 접근할 지 라우팅하는 방식으로 해결할 수 있다. 사용자는 같은 replication에 접근함으로써

lag이 발생하지 않아 이를 해결할 수 있다.ㄴ