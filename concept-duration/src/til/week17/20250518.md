# 시간
- 12:00 ~ 23:00 : stomp kafka 채팅 및 알림 연구
- 24:00 ~ 01:00 : 전화 영어

# 간략 회고

### stomp kafka 채팅 및 알림 연구

V2 기능에 채팅과 알림 기능이 추가된다. 따라서 stomp 및 카프카를 사용하기로 결정하였다.

그 이유는 채팅 기능에서 만약 ec2가 늘어나는 분산 환경이 일어나게 된다면 인메모리 브로커로 해결할 수 없었다.

따라서 알림 기능도 있을 뿐더러 msa 환경으로의 확장 가능성을 염두에 두고 외부 브로커로 카프카를 사용하기로 하였다.

간단히 미니 프로젝트를 만드는데에는 성공했다. 로컬에서 동작하도록 구현하였다.

다만 문제가 있었다. 만약 ec2 가 10개라면 ec2 10개 모두 채팅을 consume 하고 해당 사용자가 있는지 찾아서 있으면 보내 주는 형식 이었다.

우리는 1:1 채팅이라 ec2 10개 모두 받을 필요없이 해당 사용자만 있는 ec2에만 보내면 되는데 비효율적이라는 생각을 하였다.

당근 테크 컨퍼런스를 살펴보았는데 해당 기업에선 relay라는 기법으로 이 문제를 해결하였다.

다만 기술적 난이도가 있어서 우선 빠르게 개발해야 하는 지금 아직 사용자가 많지 않으니 전의 방식으로 빠르게 개발하고 후에

마이그레이션하는 방안을 염두하고 있다.